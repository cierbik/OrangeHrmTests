pipeline {
    agent any
    stages {
        stage('Install Cypress') {
            steps {
                script {
                   if (!fileExists('node_modules/cypress')) { powershell 'npm install cypress'
                }
            }
        }
        stage('Run Cypress Tests') {
            steps {
                script {
                    powershell 'npx cypress run'
                }
            }
        }
     post {
        always {
            // Możesz dodać krok, aby przechować node_modules w cache
            // Przechowywanie zależności (np. cache w systemie) może przyspieszyć kolejne uruchomienia
            // Przykład: Cache node_modules na systemie Windows (możesz dodać inne metody do cachowania)
        }
    }
}
